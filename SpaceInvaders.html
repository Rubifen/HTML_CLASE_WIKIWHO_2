<!DOCTYPE html>
<html>
<head>
    <title>Space Invaders</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
        }

        .game-container {
            position: relative;
            width: 800px;
            height: 600px;
            margin: 100px auto;
            background-color: #000;
        }

        .player {
            position: absolute;
            width: 50px;
            height: 30px;
            background-color: #00f;
            bottom: 0;
            left: 375px;
        }

        .bullet {
            position: absolute;
            width: 3px;
            height: 10px;
            background-color: #00f;
        }

        .invader {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: #f00;
        }

        .score {
            position: absolute;
            top: 10px;
            right: 10px;
            color: white;
            font-size: 24px;
        }

        .game-over {
            position: absolute;
            top: 250px;
            left: 350px;
            color: white;
            font-size: 36px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="player"></div>
    </div>
    <p class="score">Score: 0</p>
    <p class="game-over" id="game-over">Game Over</p>
    <script>
        const gameContainer = document.querySelector('.game-container');
        const player = document.querySelector('.player');
        const scoreElement = document.querySelector('.score');
        const gameOverElement = document.querySelector('#game-over');
        const playerSpeed = 5;
        const bulletSpeed = 5;
        const invaderSpeed = 1;
        const playerMovement = { left: false, right: false };
        let score = 0;
        let invaders = [];
        let bullets = [];

        function movePlayer() {
            if (playerMovement.left && player.offsetLeft > 0) {
                player.style.left = (player.offsetLeft - playerSpeed) + 'px';
            } else if (playerMovement.right && player.offsetLeft < (gameContainer.offsetWidth - player.offsetWidth)) {
                player.style.left = (player.offsetLeft + playerSpeed) + 'px';
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') {
                playerMovement.left = true;
            } else if (e.key === 'ArrowRight') {
                playerMovement.right = true;
            } else if (e.key === ' ' || e.key === 'Spacebar') {
                createBullet();
            }
        });

        document.addEventListener('keyup', (e) => {
            if (e.key === 'ArrowLeft') {
                playerMovement.left = false;
            } else if (e.key === 'ArrowRight') {
                playerMovement.right = false;
            }
        });

        function createBullet() {
            const bullet = document.createElement('div');
            bullet.classList.add('bullet');
            bullet.style.left = (player.offsetLeft + player.offsetWidth / 2 - 1) + 'px';
            bullet.style.bottom = '30px';
            gameContainer.appendChild(bullet);

            bullets.push(bullet);

            function moveBullet() {
                const currentBottom = parseInt(bullet.style.bottom);
                bullet.style.bottom = (currentBottom + bulletSpeed) + 'px';

                if (currentBottom >= gameContainer.clientHeight) {
                    gameContainer.removeChild(bullet);
                    bullets.shift();
                } else {
                    checkBulletCollision(bullet);
                }
            }

            setInterval(moveBullet, 16);
        }

        function checkBulletCollision(bullet) {
            const bulletRect = bullet.getBoundingClientRect();

            for (let i = 0; i < invaders.length; i++) {
                const invader = invaders[i];
                const invaderRect = invader.getBoundingClientRect();

                if (bulletRect.top <= invaderRect.bottom &&
                    bulletRect.right >= invaderRect.left &&
                    bulletRect.left <= invaderRect.right) {
                    gameContainer.removeChild(bullet);
                    gameContainer.removeChild(invader);
                    bullets.shift();
                    invaders.splice(i, 1);
                    updateScore(10);

                    if (invaders.length === 0) {
                        createInvaders();
                    }
                    return;
                }
            }
        }

        function updateScore(points) {
            score += points;
            scoreElement.innerText = 'Score: ' + score;
        }

        function createInvaders() {
            for (let i = 0; i < 8; i++) {
                const invader = document.createElement('div');
                invader.classList.add('invader');
                invader.style.left = (i * 100) + 'px';
                invader.style.top = '0';
                gameContainer.appendChild(invader);
                invaders.push(invader);
            }
        }

        function moveInvaders() {
            invaders.forEach((invader) => {
                const currentTop = parseInt(invader.style.top);
                invader.style.top = (currentTop + invaderSpeed) + 'px';

                if (currentTop >= gameContainer.clientHeight) {
                    gameOver();
                } else {
                    checkPlayerCollision(invader);
                }
            });
        }

        function checkPlayerCollision(invader) {
            const playerRect = player.getBoundingClientRect();
            const invaderRect = invader.getBoundingClientRect();

            if (playerRect.top <= invaderRect.bottom &&
                playerRect.right >= invaderRect.left &&
                playerRect.left <= invaderRect.right) {
                gameOver();
            }
        }

        function gameOver() {
            gameOverElement.style.display = 'block';
            clearInterval(invaderInterval);
            document.removeEventListener('keydown', movePlayer);
        }

        function invaderShooting() {
            if (invaders.length > 0) {
                const randomInvader = invaders[Math.floor(Math.random() * invaders.length)];
                createBulletFromInvader(randomInvader);
            }
        }

        function createBulletFromInvader(invader) {
            const bullet = document.createElement('div');
            bullet.classList.add('bullet');
            bullet.style.left = (invader.offsetLeft + invader.offsetWidth / 2 - 1) + 'px';
            bullet.style.top = (invader.offsetTop + invader.offsetHeight) + 'px';
            gameContainer.appendChild(bullet);

            function moveBullet() {
                const currentTop = parseInt(bullet.style.top);
                bullet.style.top = (currentTop + bulletSpeed) + 'px';

                if (currentTop >= gameContainer.clientHeight) {
                    gameContainer.removeChild(bullet);
                } else {
                    checkPlayerCollision(bullet);
                }
            }

            setInterval(moveBullet, 16);
        }

        document.addEventListener('keydown', movePlayer);
        createInvaders();
        const invaderInterval = setInterval(moveInvaders, 16);
        setInterval(movePlayer, 16);
        setInterval(invaderShooting, 2000); // Invasores disparan cada 2 segundos
    </script>
</body>
</html>
